import Head from 'next/head';
import React, { useState } from 'react';
import 'react-multi-carousel/lib/styles.css';
import 'swiper/css';
import 'swiper/css/pagination';
import useSWR from 'swr';
import { fetcher, SERVER_URL } from '../api/requestMethod';
import ListProductComponent from '../components/client/ListProductComponent';
import LoadingProduct from '../components/client/LoadingProduct';
import PaginationData from '../components/client/Pagination';
import MainLayout from '../components/layout/main';

export default function Home(props) {
	const [page, setPage] = useState(1);

	const { data, isValidating } = useSWR(`${SERVER_URL}/product`, fetcher);

	const handlePagination = number => {
		setPage(number);
	};

	return (
		<>
			<Head>
				<title>Create Next App</title>
				<meta
					name='description'
					content='Generated by create next app'
				/>
				<link rel='icon' href='/favicon.ico' />
			</Head>
			{/* <BannerCarousel /> */}
			{/* <Slider arrProduct={props.listProduct.slice(0, 8)} /> */}
			{isValidating ? (
				<LoadingProduct />
			) : (
				<ListProductComponent arrProduct={data} />
			)}
			{isValidating ? (
				<LoadingProduct />
			) : (
				<PaginationData
					totalProduct={data?.length}
					handlePagination={handlePagination}
				/>
			)}
		</>
	);
}

// export async function getServerSideProps(page) {
//   const res = await axios.get(
//     `https://63030a4dc6dda4f287c1d8d4.mockapi.io/product?page=${page}&limit=10`
//   );
//   const data = res.data;

//   return {
//     props: {
//       listProduct: data.products,
//       count: data.count,
//     },
//   };
// }

Home.Layout = MainLayout;
