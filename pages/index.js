import Head from "next/head";
import React, { useEffect, useState } from "react";
import "react-multi-carousel/lib/styles.css";
import "swiper/css";
import "swiper/css/pagination";
import ListProductComponent from "../components/client/ListProductComponent";
import PaginationData from '../components/client/Pagination';
import Slider from "../components/client/Slider";
import { BannerCarousel } from "../components/client/BannerCarousel";
import MainLayout from "../components/layout/main";
import axios from "axios";
import { useDispatch, useSelector } from "react-redux";
import { listProductData, listProductReUse } from "../redux/client/productSlice";
import useSWR from "swr";
import useSWRInfinite from 'swr/infinite'


const fetcher = url => fetch(url).then(r => r.json());
const url = 'https://63030a4dc6dda4f287c1d8d4.mockapi.io/product';

export default function Home(props) {

  const [page, setPage] = useState(1);

  const { data } = useSWR(`${url}?page=${page}&limit=10`, fetcher);
  console.log("data fetching", data);


  const handlePagination = (number) => {
    console.log("Page number", number);
    setPage(number);
  }

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {/* <BannerCarousel /> */}
      {/* <Slider arrProduct={props.listProduct.slice(0, 8)} /> */}
      {data && <ListProductComponent arrProduct={data?.products} />}
      {data && <PaginationData
        totalProduct={data?.count}
        handlePagination={handlePagination} />}
    </>
  );
}

// export async function getServerSideProps(page) {
//   const res = await axios.get(
//     `https://63030a4dc6dda4f287c1d8d4.mockapi.io/product?page=${page}&limit=10`
//   );
//   const data = res.data;

//   return {
//     props: {
//       listProduct: data.products,
//       count: data.count,
//     },
//   };
// }

Home.Layout = MainLayout;
